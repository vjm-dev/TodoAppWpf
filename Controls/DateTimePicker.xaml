<UserControl x:Class="TodoAppWpf.Controls.DateTimePicker"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:controls="clr-namespace:TodoAppWpf.Controls"
             mc:Ignorable="d" 
             d:DesignHeight="440" d:DesignWidth="280">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header with selected date and time -->
        <Border Grid.Row="0" Background="#FFE3F2FD" CornerRadius="3" Padding="5" Margin="0,0,0,5">
            <TextBlock x:Name="txtSelectedDateTime" Text="No date selected" 
                       HorizontalAlignment="Center" FontWeight="Bold" TextWrapping="Wrap"/>
        </Border>

        <!-- Content -->
        <StackPanel Grid.Row="1">
            <!-- Date input with calendar button -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,5" HorizontalAlignment="Center">
                <DatePicker x:Name="datePicker" Width="120" SelectedDateChanged="DatePicker_SelectedDateChanged"/>
                <Button x:Name="btnClearDate" Content="Clear" Margin="5,0,0,0" 
                        Click="BtnClearDate_Click" Padding="5,2" VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Time selection -->
            <TextBlock Text="Select time:" TextAlignment="Center" FontWeight="Bold" Margin="0,0,0,5"/>
            <TextBlock x:Name="txtTime" TextAlignment="Center" Text="{Binding SelectedTime, StringFormat='HH:mm', FallbackValue='--:--'}" FontWeight="Bold" Margin="0,5,0,0"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                <Button x:Name="btnNow" Content="Now" Margin="0,0,5,0" Click="BtnNow_Click" Padding="10,5"/>
                <Button x:Name="btnClearTime" Content="Clear" Margin="5,0,0,0" Click="BtnClearTime_Click" Padding="10,5"/>
            </StackPanel>

            <Viewbox MaxWidth="220" MaxHeight="220" HorizontalAlignment="Center" Margin="0,35,0,0">
                <controls:AnalogClock x:Name="analogClock" SelectedTime="{Binding SelectedTime, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" Height="259"/>
            </Viewbox>
        </StackPanel>
    </Grid>
</UserControl>
